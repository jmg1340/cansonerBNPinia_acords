<template >
  <div class="negre">

    <div class="row items-top justify-evenly">
      <!-- <div class="col-auto borde"> -->
        <!-- <div class="column"> -->
          <div class="col-auto">
            <svg
  @dblclick="imatgeJesus = !imatgeJesus"
  class="moveToCenter"
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:cc="http://creativecommons.org/ns#"
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:svg="http://www.w3.org/2000/svg"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
  xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
  width="25mm"
  height="25.523463mm"
  viewBox="0 0 25 25.523463"
  version="1.1"
  id="svg8"
  inkscape:version="1.0.1 (3bc2e813f5, 2020-09-07)"
  sodipodi:docname="logoBN.svg">
  <defs
    id="defs2">
    <rect
      x="114.90476"
      y="208.45387"
      width="31.770548"
      height="8.8731842"
      id="rect939" />
    <rect
      x="-254"
      y="231.32143"
      width="45.437473"
      height="11.491521"
      id="rect933" />
    <filter
      inkscape:collect="always"
      style="color-interpolation-filters:sRGB"
      id="filter919"
      x="-0.047725189"
      width="1.0954504"
      y="-0.048277993"
      height="1.0965559">
      <feGaussianBlur
        inkscape:collect="always"
        stdDeviation="2.731185"
        id="feGaussianBlur921" />
    </filter>
    <filter
      inkscape:collect="always"
      style="color-interpolation-filters:sRGB"
      id="filter923"
      x="-0.047725189"
      width="1.0954504"
      y="-0.048277993"
      height="1.0965559">
      <feGaussianBlur
        inkscape:collect="always"
        stdDeviation="2.5398527"
        id="feGaussianBlur925" />
    </filter>
    <filter
      inkscape:collect="always"
      style="color-interpolation-filters:sRGB"
      id="filter927"
      x="-0.047725189"
      width="1.0954504"
      y="-0.048277993"
      height="1.0965559">
      <feGaussianBlur
        inkscape:collect="always"
        stdDeviation="2.2280244"
        id="feGaussianBlur929" />
    </filter>
  </defs>
  <sodipodi:namedview
    id="base"
    pagecolor="#ffffff"
    bordercolor="#666666"
    borderopacity="1.0"
    inkscape:pageopacity="0.0"
    inkscape:pageshadow="2"
    inkscape:zoom="1.979899"
    inkscape:cx="212.70415"
    inkscape:cy="160.76717"
    inkscape:document-units="px"
    inkscape:current-layer="layer1"
    inkscape:document-rotation="0"
    showgrid="false"
    inkscape:window-width="1755"
    inkscape:window-height="974"
    inkscape:window-x="38"
    inkscape:window-y="0"
    inkscape:window-maximized="0"
    fit-margin-top="0"
    fit-margin-left="0"
    fit-margin-right="0"
    fit-margin-bottom="0" />
  <metadata
    id="metadata5">
    <rdf:RDF>
      <cc:Work
        rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
          rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>

  <g
    inkscape:label="Layer 1"
    inkscape:groupmode="layer"
    id="layer1"
    transform="translate(-1.783963,-1.4076286)">

    <g>
    
  


      <text
        xml:space="preserve"
        id="idRCCeE"
        style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:5.29167px;line-height:1;font-family:'Frank Ruhl Hofshi';-inkscape-font-specification:'Frank Ruhl Hofshi, Normal';font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:0px;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:pre;shape-inside:url(#rect939);shape-padding:0;shape-margin:0;inline-size:0;opacity:1;vector-effect:none;fill:#ad2500;fill-opacity:0.976471;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;stop-color:#000000;stop-opacity:1"
        transform="matrix(0.3561806,0,0,0.3561806,-29.503889,-41.243578)"
        inkscape:label="RCCeE"><tspan
          x="127.9043"
          y="215.16288"><tspan
            style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:8.46667px;font-family:'Lucida Console';-inkscape-font-specification:'Lucida Console';fill:#ad2500;fill-opacity:0.976471">RCCeE</tspan></tspan></text>
      <text
        xml:space="preserve"
        id="idBONANOVA"
        style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:10.5833px;line-height:1;font-family:'Frank Ruhl Hofshi';-inkscape-font-specification:'Frank Ruhl Hofshi, Normal';font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-variant-east-asian:normal;font-feature-settings:normal;font-variation-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:0px;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;white-space:pre;shape-inside:url(#rect933);shape-padding:0;shape-margin:0;inline-size:0;opacity:1;vector-effect:none;fill:#ad2500;fill-opacity:0.960784;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;stop-color:#000000;stop-opacity:1"
        transform="matrix(0.51485081,0,0,0.51485081,135.45907,-91.622581)"
        inkscape:label="BONA NOVA"><tspan
          x="-254"
          y="239.16752"><tspan
            style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:10.5833px;font-family:Gabriola;-inkscape-font-specification:Gabriola;fill:#ad2500;fill-opacity:0.960784">BONA NOVA</tspan></tspan></text>



        <animateTransform
        attributeName="transform"
        attributeType="XML"
        type="scale"
        from="1"
        to="0.75"
        begin="0s"
        dur=".01s"
        fill="freeze" />


      <g
        id="idGrupCercles"
        inkscape:label="grupCercles"
        transform="matrix(0.12727458,0,0,0.12727458,38,13.796926) scale(1) translate(2, 0)">




        <g
          id="idCercles"
          inkscape:label="cercles">


          <animateTransform
          attributeName="transform"
          type="rotate"
          from="0 -150,20"
          to="360 -150,20"
          dur="10s"
          begin="2s"
          repeatCount="indefinite"
          />





          <ellipse
            style="opacity:1;mix-blend-mode:normal;fill:#ffb10d;fill-opacity:0.85098;stroke-width:0.178405;stroke-linecap:round;stroke-linejoin:round;paint-order:markers fill stroke;filter:url(#filter927)"
            id="ellipse917"
            cx="-103.70677"
            cy="-36.615925"
            rx="56.021343"
            ry="55.379879"
            inkscape:label="cercle Groc" />
          <ellipse
            style="opacity:1;fill:#ff6500;fill-opacity:0.839216;stroke-width:0.203374;stroke-linecap:round;stroke-linejoin:round;paint-order:markers fill stroke;filter:url(#filter923)"
            id="ellipse915"
            cx="-92.748718"
            cy="36.615925"
            rx="63.861938"
            ry="63.130695"
            inkscape:label="cercle Taronja" />
          <ellipse
            style="opacity:1;fill:#aa0000;fill-opacity:0.85098;stroke-width:0.218695;stroke-linecap:round;stroke-linejoin:round;paint-order:markers fill stroke;filter:url(#filter919)"
            id="path913"
            cx="-171.32596"
            cy="35.546844"
            rx="68.672791"
            ry="67.886459"
            inkscape:label="cercle Vermell" />
        </g>
      </g>
      <g
        id="idColom"
        inkscape:label="Colom"
        style="display:inline;fill:#ffffff;stroke:none"
        transform="matrix(0.12727458,0,0,0.12727458,41.872047,20.879568)"
        inkscape:groupmode="layer">
        <path
          style="fill:#ffffff;stroke:none;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
          d="m -265.76037,-39.67917 c 0,0 6.9964,-0.931742 10.7576,0.06682 5.19152,1.378292 10.55715,6.548103 14.03165,13.563927 3.39929,6.863941 10.15866,25.16349027 23.75643,33.8330833 14.43899,9.0579647 36.32729,6.6031197 55.41739,1.011758 4.72471,7.7485107 7.15836,15.5399727 12.28423,17.7648817 11.60505,1.09301 34.77381,-17.3869057 27.97024,-38.553573 -15.49703,-1.88988 -27.97024,3.5907753 -48.75893,-11.528274 6.80357,-10.394344 14.66388,-18.893313 19.27679,-34.58482 3.5793,-19.983286 6.63357,-29.229933 22.59079,-39.553864 -33.96447,-15.497029 -73.2396,11.477668 -81.55508,43.227668 -29.05007,-9.700693 -51.86524,-16.13615 -55.77111,14.752395 z"
          id="path905"
          sodipodi:nodetypes="cssccccccccc"
          inkscape:label="cos" />
        <path
          style="fill:#ffffff;stroke:none;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
          d="m -223.53937,-64.940322 c 2.7532,-16.152313 17.86526,-38.882098 32.97842,-47.719488 0.95527,9.00674 1.15125,11.02232 1.98437,19.08779 -8.51131,7.137236 -15.23278,14.747708 -24.28497,33.261906 -6.65724,-2.77155 -4.58066,-1.888859 -10.67782,-4.630208 z"
          id="path907"
          sodipodi:nodetypes="ccccc"
          inkscape:label="ala" />
      </g>
    </g>
  </g>
  </svg>
          </div>

          <div class="col text-center">
            <img v-if="imatgeJesus" class="borde2" src="~assets/Jesus3_gif2.gif" style="height: 95vh"/>
            <!-- <img v-if="imatgeJesus" class="borde2" src="~assets/JesusUlls.gif" style="heigth: 100vh"/> -->
          </div>


          <div class="col-1">
            <div class="column">
              <div class="col text-caption text-right borde2">
                {{seleccioCansoner}}
              </div>
              <div class="col text-caption text-right borde2">
                {{inputNumero}}
              </div>
            </div>

          </div>
        <!-- </div> -->
      <!-- </div> -->
      <!-- <div class="column  "> -->
      <!-- </div> -->
    </div>



    <!-- <div class="column items-center borde">
      <div class="col q-gutter-lg "> -->

        
        <!-- <img v-if="imatgeJesus" class="col q-mr-md" src="~assets/JesusUlls.gif" style="width: 89%"/> -->

        <!-- <div class="row">
          <img class="col q-mr-md" style="height: 50px; max-width: 50px" src="~assets/www.png" />
          <div class="col">www.bonanova.cat</div>
        </div>
        <div class="row">
          <q-img class="col q-mr-md" style="height: 50px; max-width: 50px" src="~assets/insta.png" />
          <div class="col">@bonanova.cat</div>
        </div>
        <div class="row">
          <q-img class="col q-mr-md" style="height: 50px; max-width: 50px" src="~assets/twitter.png" />
          <div class="col">@bonanova.cat</div>
        </div>
        <div class="row">
          <q-img class="col q-mr-md" style="height: 50px; max-width: 75px" src="~assets/youtube.png" />
          <div class="col">canal "grup Bona Nova"</div>
        </div>-->


      <!-- </div>
    </div> -->

  </div>
</template>


<script>

import { defineComponent, ref, onMounted, onUnmounted } from 'vue';
import { useCansoStore } from '../stores/example-store'
import { useQuasar } from 'quasar'
import { useRouter, useRoute } from 'vue-router'



export default defineComponent({
  name: "negre",

  setup() {

    const router = useRouter()
    const $q = useQuasar()
    const store = useCansoStore()


    onMounted(() => {
      if ($q.sessionStorage.getItem("imatgePaginaNegre"))
        imatgeJesus.value = $q.sessionStorage.getItem("imatgePaginaNegre");

      document.addEventListener("keydown", funcEventNegre)
    })

    onUnmounted(() => {
      $q.sessionStorage.set("imatgePaginaNegre", imatgeJesus.value);
      document.removeEventListener("keydown", funcEventNegre)
    })


    const seleccioCansoner = ref("")
    const inputNumero = ref("")
    const imatgeJesus = ref(false) 


    const funcEventNegre =  (event) => {
      console.log("event.key", event.key)
      switch( event.key ){

        case "T":
        case "t":
          router.push({ name: 'cercar' });
          break;

        case "J":
        case "j":
          imatgeJesus.value = !imatgeJesus.value
          break;

        case "N":
        case "n":
          router.back();
          break;

        case "V":
        case "v":
          seleccioCansoner.value = "Vermell";
          break;

        case "B":
        case "b":
          seleccioCansoner.value = "Blau";
          break;


        case "VK_DELETE":   //windows
        case "kVK_ForwardDelete":  // MAC
        case "Delete":
          inputNumero.value = "";
          break;

        case "VK_RETURN":   //windows
        case "kVK_Return":  // MAC
        case "Enter":
          mostrarCansoNumero();
          break;

        default:
          if (inputNumero.value.length < 3 && !isNaN(event.key)) inputNumero.value = inputNumero.value.concat(event.key);
          // inputNumero.value += event.key;
          console.log(`tecla ${event.key}`)
          break;

      }

    }

    const mostrarCansoNumero = async () => {
      console.log( "seleccioCansoner", seleccioCansoner.value)
      console.log( "inputNumero", inputNumero.value )
      
      
      const arr = store.arrDadesBasiquesCansons.filter( (c) => c.cansonerNom === seleccioCansoner.value && c.numero == inputNumero.value )
      
      switch ( arr.length ) {
        case 0:
          $q.notify(`No existeix la cançó numero ${inputNumero.value} en el cançoner '${seleccioCansoner.value}'`)
          break
        case 1:
          // s'ha trobat un resultat (un unic idioma)
          router.push({ name: "canso", query: { id: arr[0].id, idioma: arr[0].idioma, cansonerNom: arr[0].cansonerNom, cansonerNumero: arr[0].numero } })
          break
        default:
          // s'ha trobat més d'un resultat ( 2 idiomes tenen mateix cansoner i numero )

          const arrIdiomesaTriar = arr.map( o => ( { label: o.idioma, value: o.idioma } ) )

          $q.dialog({
            title:
              "La següent cançó te mateix cançoner i número de cançó per cada idioma. Quin idioma vols veure ?",
            //message: 'Tria idioma:',
            options: {
              type: "radio",
              model: null,
              // inline: true,
              items: arrIdiomesaTriar
            },
            cancel: false,
            stackButtons: true,
            persistent: true
          })
          .onOk( data =>   {
            const idioma = data;
            const obj = arr.find( o => o.idioma === idioma )
            router.push({ name: "canso", query: {  id: obj.id, idioma: obj.idioma, cansonerNom: obj.cansonerNom, cansonerNumero: obj.numero  } });
          })
      }


    }




    return {
      seleccioCansoner, inputNumero, imatgeJesus,
      funcEventNegre, mostrarCansoNumero
    }
  }




})
</script>


<style lang="css" scoped>
  .negre{
    background-color: black;
    color: #222222;
    /* text-align: center; */
    height: 100vh;
    width: 100%;

  }

  .borde{
    border: 1px solid red;
  }



  .moveToCenter {
    animation-name: moveToCenter;
    animation-duration: 3s;
    animation-fill-mode: both;
  }

  @keyframes moveToCenter {
    0% {
      transform: translate(0, 0) rotateY(0deg) scale(1);
    }
    50% {
      transform: translate(calc(50vw - 50%), calc(50vh - 50%)) rotateY(360deg) scale(5);
    }
    100% {
      transform: translate(0, 0) rotateY(720deg) scale(1);
    }
  }

</style>
